<!DOCTYPE html>
<html lang="pt-BR">
<head>
Â    <meta charset="UTF-8">
Â    <meta name="viewport" content="width=device-width, initial-scale=1.0">
Â    <title>Sistema de GestÃ£o de BÃ´nus - Attalea ConstruÃ§Ãµes</title>
Â    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
Â    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
Â    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
Â    <script src="https://cdn.tailwindcss.com"></script>
Â    <style>
Â        @media print {
Â            .no-print { display: none !important; }
Â            body { background: white !important; }
Â        }
Â    </style>
</head>
<body>
Â    <div id="root"></div>

Â    <script type="text/babel">
Â        const { useState, useEffect } = React;

Â        // Ãcones SVG simplificados
Â        const Icons = {
Â            Plus: () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 4v16m8-8H4" /></svg>,
Â            Edit: () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" /></svg>,
Â            Trash: () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" /></svg>,
Â            Users: () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z" /></svg>,
Â            Calendar: () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" /></svg>,
Â            Dollar: () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>,
Â            File: () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" /></svg>,
Â            Download: () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" /></svg>,
Â            Upload: () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12" /></svg>,
Â            Printer: () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z" /></svg>,
Â            Save: () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4" /></svg>
Â        };

Â        const BonusApp = () => {
Â            const [activeTab, setActiveTab] = useState('dashboard');
Â            const [employees, setEmployees] = useState([]);
Â            const [productions, setProductions] = useState([]);
Â            const [selectedTeam, setSelectedTeam] = useState('Equipe 1');
Â            const [showEmployeeForm, setShowEmployeeForm] = useState(false);
Â            const [editingEmployee, setEditingEmployee] = useState(null);
Â            const [startDate, setStartDate] = useState('2025-10-21');
Â            const [endDate, setEndDate] = useState('2025-11-09');
Â            const [showDateConfig, setShowDateConfig] = useState(false);
Â            const [selectedProductionCell, setSelectedProductionCell] = useState(null);
Â            const [showProductionModal, setShowProductionModal] = useState(false);

Â            const teams = ['Equipe 1', 'Equipe 2', 'Equipe 3', 'Equipe 4', 'Equipe 5', 'Equipe 6', 'Apoio'];
Â            const positions = [
Â                { name: 'Encarregado', baseValue: 60 },
Â                { name: 'Enc de Obras', baseValue: 60 },
Â                { name: 'Engenheiro', baseValue: 80 },
Â                { name: 'Operador de Retro', baseValue: 50 },
Â                { name: 'Op. Maq. Pesadas', baseValue: 50 },
Â                { name: 'Bombeiro', baseValue: 50 },
Â                { name: 'Pedreiro', baseValue: 50 },
Â                { name: 'Servente', baseValue: 50 },
Â                { name: 'Mot. CaminhÃ£o', baseValue: 40 }
Â            ];

Â            useEffect(() => {
Â                const saved = localStorage.getItem('bonusData');
Â                if (saved) {
Â                    const data = JSON.parse(saved);
Â                    setEmployees(data.employees || []);
Â                    setProductions(data.productions || []);
Â                    setStartDate(data.startDate || '2025-10-21');
Â                    setEndDate(data.endDate || '2025-11-09');
Â                }
Â            }, []);

Â            useEffect(() => {
Â                localStorage.setItem('bonusData', JSON.stringify({
Â                    employees,
Â                    productions,
Â                    startDate,
Â                    endDate
Â                }));
Â            }, [employees, productions, startDate, endDate]);

Â            const addEmployee = (employee) => {
Â                if (editingEmployee) {
Â                    setEmployees(employees.map(e => e.id === editingEmployee.id ? { ...employee, id: editingEmployee.id } : e));
Â                    setEditingEmployee(null);
Â                } else {
Â                    setEmployees([...employees, { ...employee, id: Date.now() }]);
Â                }
Â                setShowEmployeeForm(false);
Â            };

Â            const deleteEmployee = (id) => {
Â                if (window.confirm('Deseja realmente excluir este funcionÃ¡rio?')) {
Â                    setEmployees(employees.filter(e => e.id !== id));
Â                }
Â            };

Â            const updateProduction = (date, employeeId, value, workedTeam = null, observation = '') => {
Â                const key = `${date}-${employeeId}`;
Â                const existing = productions.find(p => p.key === key);
Â 
Â                if (existing) {
Â                    setProductions(productions.map(p => p.key === key ? {
Â                        ...p,
Â                        value: parseFloat(value) || 0,
Â                        workedTeam: workedTeam !== undefined ? workedTeam : p.workedTeam,
Â                        observation: observation !== undefined ? observation : p.observation
Â                    } : p));
Â                } else {
Â                    setProductions([...productions, {
Â                        key,
Â                        date,
Â                        employeeId,
Â                        value: parseFloat(value) || 0,
Â                        workedTeam,
Â                        observation
Â                    }]);
Â                }
Â            };

Â            const getProductionValue = (date, employeeId) => {
Â                const prod = productions.find(p => p.date === date && p.employeeId === employeeId);
Â                return prod ? prod.value : 0;
Â            };

Â            const getProductionDetails = (date, employeeId) => {
Â                return productions.find(p => p.date === date && p.employeeId === employeeId);
Â            };

Â            const calculateEmployeeTotal = (employeeId) => {
Â                return productions
Â                    .filter(p => p.employeeId === employeeId)
Â                    .reduce((sum, p) => sum + p.value, 0);
Â            };

Â            const getDatesForMonth = () => {
Â                const dates = [];
Â                const start = new Date(startDate);
Â                const end = new Date(endDate);
Â 
Â                for (let d = new Date(start); d <= end; d.setDate(d.getDate() + 1)) {
Â                    const day = String(d.getDate()).padStart(2, '0');
Â                    const month = String(d.getMonth() + 1).padStart(2, '0');
Â                    const year = d.getFullYear();
Â                    dates.push(`${day}/${month}/${year}`);
Â                }
Â 
Â                return dates;
Â            };

Â            const openProductionModal = (date, employee) => {
Â                const details = getProductionDetails(date, employee.id);
Â                setSelectedProductionCell({
Â                    date,
Â                    employee,
Â                    value: details?.value || 0,
Â                    workedTeam: details?.workedTeam || null,
Â                    observation: details?.observation || ''
Â                });
Â                setShowProductionModal(true);
Â            };

Â            const saveProductionDetails = () => {
Â                if (selectedProductionCell) {
Â                    updateProduction(
Â                        selectedProductionCell.date,
Â                        selectedProductionCell.employee.id,
Â                        selectedProductionCell.value,
Â                        selectedProductionCell.workedTeam,
Â                        selectedProductionCell.observation
Â                    );
Â                    setShowProductionModal(false);
Â                    setSelectedProductionCell(null);
Â                }
Â            };

Â            const exportData = () => {
Â                const dataToExport = {
Â                    employees,
Â                    productions,
Â                    startDate,
Â                    endDate,
Â                    exportDate: new Date().toISOString(),
Â                    version: '1.0'
Â                };
Â 
Â                const dataStr = JSON.stringify(dataToExport, null, 2);
Â                const dataBlob = new Blob([dataStr], { type: 'application/json' });
Â                const url = URL.createObjectURL(dataBlob);
Â                const link = document.createElement('a');
Â                link.href = url;
Â                link.download = `bonus-backup-${new Date().toISOString().split('T')\[0]}.json`;
Â                document.body.appendChild(link);
Â                link.click();
Â                document.body.removeChild(link);
Â                URL.revokeObjectURL(url);
Â 
Â                alert('âœ… Dados exportados com sucesso!');
Â            };

Â            const importData = (event) => {
Â                const file = event.target.files[0];
Â                if (!file) return;

Â                const reader = new FileReader();
Â                reader.onload = (e) => {
Â                    try {
Â                        const importedData = JSON.parse(e.target.result);
Â 
Â                        if (!importedData.employees || !importedData.productions) {
Â                            alert('âŒ Arquivo invÃ¡lido!');
Â                            return;
Â                        }

Â                        const confirmImport = window.confirm(
Â                            `Importar ${importedData.employees.length} funcionÃ¡rios e ${importedData.productions.length} registros?\\n\\nâš ï¸ Isso substituirÃ¡ os dados atuais!`
Â                        );

Â                        if (confirmImport) {
Â                            setEmployees(importedData.employees);
Â                            setProductions(importedData.productions);
Â                            if (importedData.startDate) setStartDate(importedData.startDate);
Â                            if (importedData.endDate) setEndDate(importedData.endDate);
Â                            alert('âœ… Dados importados com sucesso!');
Â                        }
Â                    } catch (error) {
Â                        alert('âŒ Erro ao importar arquivo!');
Â                    }
Â                };
Â                reader.readAsText(file);
Â                event.target.value = '';
Â            };

Â            const teamEmployees = employees.filter(e => e.team === selectedTeam);
Â            const dates = getDatesForMonth();

Â            return (
Â                <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4">
Â                    <div className="max-w-7xl mx-auto">
Â                        <div className="bg-white rounded-lg shadow-lg p-6 mb-6">
Â                            <h1 className="text-3xl font-bold text-gray-800 mb-2">
Â                                Sistema de GestÃ£o de BÃ´nus de ProduÃ§Ã£o
Â                            </h1>
Â                            <p className="text-gray-600 mb-4">Attalea ConstruÃ§Ãµes Ltda - Rede de Esgoto</p>
Â 
Â                            <div className="flex flex-wrap gap-2">
Â                                <button
Â                                    onClick={exportData}
Â                                    className="flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors text-sm"
Â                                >
Â                                    <Icons.Download />
Â                                    Exportar Dados
Â                                </button>
Â 
Â                                <label className="flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors cursor-pointer text-sm">
Â                                    <Icons.Upload />
Â                                    Importar Dados
Â                                    <input
Â                                        type="file"
Â                                        accept=".json"
Â                                        onChange={importData}
Â                                        className="hidden"
Â                                    />
Â                                </label>
Â                            </div>
Â                        </div>

Â                        <div className="bg-white rounded-lg shadow-lg mb-6">
Â                            <div className="flex border-b overflow-x-auto">
Â                                {[
Â                                    { id: 'dashboard', label: 'Dashboard', icon: Icons.File },
Â                                    { id: 'employees', label: 'FuncionÃ¡rios', icon: Icons.Users },
Â                                    { id: 'production', label: 'ProduÃ§Ã£o', icon: Icons.Calendar },
Â                                    { id: 'report', label: 'RelatÃ³rio', icon: Icons.Dollar }
Â                                ].map(tab => (
Â                                    <button
Â                                        key={tab.id}
Â                                        onClick={() => setActiveTab(tab.id)}
Â                                        className={`flex items-center gap-2 px-6 py-4 font-medium transition-colors whitespace-nowrap ${
Â                                            activeTab === tab.id
Â                                                ? 'border-b-2 border-blue-500 text-blue-600'
Â                                                : 'text-gray-600 hover:text-gray-800'
Â                                        }`}
Â                                    >
Â                                        <tab.icon />
Â                                        {tab.label}
Â                                    </button>
Â                                ))}
Â                            </div>
Â                        </div>

Â                        {activeTab === 'dashboard' && (
Â                            <div className="space-y-6">
Â                                <div className="bg-blue-50 border-l-4 border-blue-500 p-4">
Â                                    <h3 className="font-bold text-blue-800 mb-1">ðŸ’¡ Dica: FaÃ§a Backup Regular!</h3>
Â                                    <p className="text-sm text-blue-700">
Â                                        Use "Exportar Dados" para salvar backup e transferir entre dispositivos.
Â                                    </p>
Â                                </div>

Â                                <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
Â                                    <div className="bg-white rounded-lg shadow-lg p-6">
Â                                        <div className="flex items-center gap-4">
Â                                            <div className="bg-blue-100 p-3 rounded-lg">
Â                                                <Icons.Users />
Â                                            </div>
Â                                            <div>
Â                                                <p className="text-gray-600 text-sm">FuncionÃ¡rios</p>
Â                                                <p className="text-2xl font-bold text-gray-800">{employees.length}</p>
Â                                            </div>
Â                                        </div>
Â                                    </div>
Â 
Â                                    <div className="bg-white rounded-lg shadow-lg p-6">
Â                                        <div className="flex items-center gap-4">
Â                                            <div className="bg-green-100 p-3 rounded-lg">
Â                                                <Icons.Dollar />
Â                                            </div>
Â                                            <div>
Â                                                <p className="text-gray-600 text-sm">BÃ´nus Total</p>
Â                                                <p className="text-2xl font-bold text-gray-800">
Â                                                    R$ {employees.reduce((sum, emp) => sum + calculateEmployeeTotal(emp.id), 0).toFixed(2)}
Â                                                </p>
Â                                            </div>
Â                                        </div>
Â                                    </div>
Â 
Â                                    <div className="bg-white rounded-lg shadow-lg p-6">
Â                                        <div className="flex items-center gap-4">
Â                                            <div className="bg-purple-100 p-3 rounded-lg">
Â                                                <Icons.Calendar />
Â                                            </div>
Â                                            <div>
Â                                                <p className="text-gray-600 text-sm">Equipes</p>
Â                                                <p className="text-2xl font-bold text-gray-800">{teams.length}</p>
Â                                            </div>
Â                                        </div>
Â                                    </div>
Â                                </div>

Â                                <div className="bg-white rounded-lg shadow-lg p-6">
Â                                    <h2 className="text-xl font-bold text-gray-800 mb-4">Resumo por Equipe</h2>
Â                                    <div className="space-y-3">
Â                                        {teams.map(team => {
Â                                            const teamEmps = employees.filter(e => e.team === team);
Â                                            const teamTotal = teamEmps.reduce((sum, emp) => sum + calculateEmployeeTotal(emp.id), 0);
Â                                            return (
Â                                                <div key={team} className="flex justify-between items-center p-4 bg-gray-50 rounded-lg">
Â                                                    <div>
Â                                                        <p className="font-semibold text-gray-800">{team}</p>
Â                                                        <p className="text-sm text-gray-600">{teamEmps.length} funcionÃ¡rios</p>
Â                                                    </div>
Â                                                    <p className="text-lg font-bold text-green-600">R$ {teamTotal.toFixed(2)}</p>
Â                                                </div>
Â                                            );
Â                                        })}
Â                                    </div>
Â                                </div>
Â                            </div>
Â                        )}

Â                        {activeTab === 'employees' && (
Â                            <div className="bg-white rounded-lg shadow-lg p-6">
Â                                <div className="flex justify-between items-center mb-6">
Â                                    <h2 className="text-xl font-bold text-gray-800">Gerenciar FuncionÃ¡rios</h2>
Â                                    <button
Â                                        onClick={() => {
Â                                            setEditingEmployee(null);
Â                                            setShowEmployeeForm(true);
Â                                        }}
Â                                        className="flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700"
Â                                    >
Â                                        <Icons.Plus />
Â                                        Adicionar
Â                                    </button>
Â                                </div>

Â                                {showEmployeeForm && (
Â                                    <EmployeeForm
Â                                        positions={positions}
Â                                        teams={teams}
Â                                        onSave={addEmployee}
Â                                        onCancel={() => {
Â                                            setShowEmployeeForm(false);
Â                                            setEditingEmployee(null);
Â                                        }}
Â                                        initialData={editingEmployee}
Â                                    />
Â                                )}

Â                                <div className="space-y-4 mt-6">
Â                                    {teams.map(team => {
Â                                        const teamEmps = employees.filter(e => e.team === team);
Â                                        if (teamEmps.length === 0) return null;
Â 
Â                                        return (
Â                                            <div key={team} className="border rounded-lg p-4">
Â                                                <h3 className="font-bold text-gray-800 mb-3">{team}</h3>
Â                                                <div className="space-y-2">
Â                                                    {teamEmps.map(emp => (
Â                                                        <div key={emp.id} className="flex justify-between items-center p-3 bg-gray-50 rounded">
Â                                                            <div>
Â                                                                <p className="font-semibold text-gray-800">{emp.name}</p>
Â                                                                <p className="text-sm text-gray-600">
Â                                                                    {emp.position} - R$ {emp.dailyValue.toFixed(2)}/dia
Â                                                                    {emp.badge && <span className="ml-2 text-xs bg-blue-100 text-blue-600 px-2 py-1 rounded">
Â                                                                        Ficha: {emp.badge}
Â                                                                    </span>}
Â                                                                </p>
Â                                                            </div>
Â                                                            <div className="flex gap-2">
Â                                                                <button
Â                                                                    onClick={() => {
Â                                                                        setEditingEmployee(emp);
Â                                                                        setShowEmployeeForm(true);
Â                                                                    }}
Â                                                                    className="p-2 text-blue-600 hover:bg-blue-50 rounded"
Â                                                                >
Â                                                                    <Icons.Edit />
Â                                                                </button>
Â                                                                <button
Â                                                                    onClick={() => deleteEmployee(emp.id)}
Â                                                                    className="p-2 text-red-600 hover:bg-red-50 rounded"
Â                                                                >
Â                                                                    <Icons.Trash />
Â                                                                </button>
Â                                                            </div>
Â                                                        </div>
Â                                                    ))}
Â                                                </div>
Â                                            </div>
Â                                        );
Â                                    })}
Â                                </div>
Â                            </div>
Â                        )}

Â                        {activeTab === 'production' && (
Â                            <div className="bg-white rounded-lg shadow-lg p-6">
Â                                <div className="flex justify-between items-center mb-6 flex-wrap gap-4">
Â                                    <div className="flex-1 min-w-\[200px]">
Â                                        <label className="block text-sm font-medium text-gray-700 mb-2">
Â                                            Equipe
Â                                        </label>
Â                                        <select
Â                                            value={selectedTeam}
Â                                            onChange={(e) => setSelectedTeam(e.target.value)}
Â                                            className="w-full px-4 py-2 border border-gray-300 rounded-lg"
Â                                        >
Â                                            {teams.map(team => (
Â                                                <option key={team} value={team}>{team}</option>
Â                                            ))}
Â                                        </select>
Â                                    </div>
Â                                    <button
Â                                        onClick={() => setShowDateConfig(!showDateConfig)}
Â                                        className="flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700"
Â                                    >
Â                                        <Icons.Calendar />
Â                                        PerÃ­odo
Â                                    </button>
Â                                </div>

Â                                {showDateConfig && (
Â                                    <div className="bg-indigo-50 p-4 rounded-lg mb-6">
Â                                        <h3 className="font-bold text-gray-800 mb-3">Configurar PerÃ­odo</h3>
Â                                        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
Â                                            <div>
Â                                                <label className="block text-sm font-medium text-gray-700 mb-1">Data Inicial</label>
Â                                                <input
Â                                                    type="date"
Â                                                    value={startDate}
Â                                                    onChange={(e) => setStartDate(e.target.value)}
Â                                                    className="w-full px-4 py-2 border border-gray-300 rounded-lg"
Â                                                />
Â                                            </div>
Â                                            <div>
Â                                                <label className="block text-sm font-medium text-gray-700 mb-1">Data Final</label>
Â                                                <input
Â                                                    type="date"
Â                                                    value={endDate}
Â                                                    onChange={(e) => setEndDate(e.target.value)}
Â                                                    className="w-full px-4 py-2 border border-gray-300 rounded-lg"
Â                                                />
Â                                            </div>
Â                                        </div>
Â                                        <p className="text-sm text-gray-600 mt-3">
Â                                            Total: {dates.length} dias
Â                                        </p>
Â                                    </div>
Â                                )}

Â                                {teamEmployees.length === 0 ? (
Â                                    <div className="text-center py-12 text-gray-500">
Â                                        Nenhum funcionÃ¡rio cadastrado nesta equipe.
Â                                    </div>
Â                                ) : (
Â                                    <div className="overflow-x-auto">
Â                                        <table className="w-full text-sm">
Â                                            <thead>
Â                                                <tr className="bg-gray-100">
Â                                                    <th className="px-4 py-2 text-left font-semibold sticky left-0 bg-gray-100 z-10">
Â                                                        FuncionÃ¡rio
Â                                                    </th>
Â                                                    <th className="px-4 py-2 text-left font-semibold">Cargo</th>
Â                                                    {dates.map(date => (
Â                                                        <th key={date} className="px-2 py-2 text-center font-semibold whitespace-nowrap">
Â                                                            {date.substring(0, 5)}
Â                                                        </th>
Â                                                    ))}
Â                                                    <th className="px-4 py-2 text-right font-semibold">Total</th>
Â                                                </tr>
Â                                            </thead>
Â                                            <tbody>
Â                                                {teamEmployees.map(emp => (
Â                                                    <tr key={emp.id} className="border-b hover:bg-gray-50">
Â                                                        <td className="px-4 py-2 font-medium sticky left-0 bg-white z-10">
Â                                                            {emp.name}
Â                                                        </td>
Â                                                        <td className="px-4 py-2 text-gray-600">{emp.position}</td>
Â                                                        {dates.map(date => (
Â                                                            <td key={date} className="px-2 py-2">
Â                                                                <div className="relative">
Â                                                                    <input
Â                                                                        type="number"
Â                                                                        step="0.01"
Â                                                                        value={getProductionValue(date, emp.id) || ''}
Â                                                                        onChange={(e) => updateProduction(date, emp.id, e.target.value)}
Â                                                                        onClick={() => openProductionModal(date, emp)}
Â                                                                        className="w-16 px-2 py-1 border border-gray-300 rounded text-center cursor-pointer"
Â                                                                        placeholder="0"
Â                                                                        title="Clique para detalhes"
Â                                                                    />
Â                                                                    {getProductionDetails(date, emp.id)?.workedTeam && (
Â                                                                        <span className="absolute -top-1 -right-1 w-3 h-3 bg-orange-500 rounded-full" title="Outra equipe"></span>
Â                                                                    )}
Â                                                                    {getProductionDetails(date, emp.id)?.observation && (
Â                                                                        <span className="absolute -bottom-1 -right-1 w-3 h-3 bg-blue-500 rounded-full" title="ObservaÃ§Ã£o"></span>
Â                                                                    )}
Â                                                                </div>
Â                                                            </td>
Â                                                        ))}
Â                                                        <td className="px-4 py-2 text-right font-bold text-green-600">
Â                                                            R$ {calculateEmployeeTotal(emp.id).toFixed(2)}
Â                                                        </td>
Â                                                    </tr>
Â                                                ))}
Â                                            </tbody>
Â                                            <tfoot>
Â                                                <tr className="bg-gray-100 font-bold">
Â                                                    <td colSpan={2} className="px-4 py-3">TOTAL</td>
Â                                                    {dates.map(date => {
Â                                                        const dayTotal = teamEmployees.reduce((sum, emp) =>
Â                                                            sum + getProductionValue(date, emp.id), 0
Â                                                        );
Â                                                        return (
Â                                                            <td key={date} className="px-2 py-3 text-center">
Â                                                                {dayTotal > 0 ? dayTotal.toFixed(0) : '-'}
Â                                                            </td>
Â                                                        );
Â                                                    })}
Â                                                    <td className="px-4 py-3 text-right text-green-600">
Â                                                        R$ {teamEmployees.reduce((sum, emp) => sum + calculateEmployeeTotal(emp.id), 0).toFixed(2)}
Â                                                    </td>
Â                                                </tr>
Â                                            </tfoot>
Â                                        </table>
Â                                    </div>
Â                                )}
Â                            </div>
Â                        )}

Â                        {activeTab === 'report' && (
Â                            <div className="bg-white rounded-lg shadow-lg p-6">
Â                                <h2 className="text-xl font-bold text-gray-800 mb-6">RelatÃ³rio Completo</h2>
Â 
Â                                {employees.length === 0 ? (
Â                                    <div className="text-center py-12 text-gray-500">
Â                                        Nenhum funcionÃ¡rio cadastrado.
Â                                    </div>
Â                                ) : (
Â                                    <div className="space-y-6">
Â                                        {teams.map(team => {
Â                                            const teamEmps = employees.filter(e => e.team === team);
Â                                            if (teamEmps.length === 0) return null;
Â 
Â                                            const teamTotal = teamEmps.reduce((sum, emp) => sum + calculateEmployeeTotal(emp.id), 0);
Â                                            const maxValue = Math.max(...teamEmps.map(emp => calculateEmployeeTotal(emp.id)));
Â 
Â                                            return (
Â                                                <div key={team} className="border-2 border-gray-200 rounded-lg p-5">
Â                                                    <div className="flex justify-between items-center mb-4 pb-3 border-b-2">
Â                                                        <h3 className="text-lg font-bold">{team}</h3>
Â                                                        <p className="text-xl font-bold text-green-600">R$ {teamTotal.toFixed(2)}</p>
Â                                                    </div>
Â 
Â                                                    <div className="space-y-3">
Â                                                        {teamEmps
Â                                                            .sort((a, b) => calculateEmployeeTotal(b.id) - calculateEmployeeTotal(a.id))
Â                                                            .map(emp => {
Â                                                                const total = calculateEmployeeTotal(emp.id);
Â                                                                const percentage = maxValue > 0 ? (total / maxValue) * 100 : 0;
Â 
Â                                                                return (
Â                                                                    <div key={emp.id} className="bg-gray-50 rounded-lg p-4">
Â                                                                        <div className="flex justify-between items-start mb-2">
Â                                                                            <div className="flex-1">
Â                                                                                <p className="font-semibold">{emp.name}</p>
Â                                                                                <p className="text-sm text-gray-600">
Â                                                                                    {emp.position} â€¢ R$ {emp.dailyValue.toFixed(2)}/dia
Â                                                                                </p>
Â                                                                            </div>
Â                                                                            <div className="text-right ml-4">
Â                                                                                <p className="text-lg font-bold text-green-600">R$ {total.toFixed(2)}</p>
Â                                                                                <p className="text-xs text-gray-500">
Â                                                                                    {productions.filter(p => p.employeeId === emp.id && p.value > 0).length} dias
Â                                                                                </p>
Â                                                                            </div>
Â                                                                        </div>
Â                                                                        <div className="w-full bg-gray-200 rounded-full h-3">
Â                                                                            <div
Â                                                                                className="bg-gradient-to-r from-blue-500 to-green-500 h-3 rounded-full"
Â                                                                                style={{ width: `${percentage}%` }}
Â                                                                            ></div>
Â                                                                        </div>
Â                                                                    </div>
Â                                                                );
Â                                                            })}
Â                                                    </div>
Â                                                </div>
Â                                            );
Â                                        })}

Â                                        <div className="mt-6 pt-6 border-t-2 bg-green-50 p-6 rounded-lg">
Â                                            <div className="flex justify-between items-center">
Â                                                <span className="text-lg font-bold">TOTAL GERAL</span>
Â                                                <span className="text-2xl font-bold text-green-600">
Â                                                    R$ {employees.reduce((sum, emp) => sum + calculateEmployeeTotal(emp.id), 0).toFixed(2)}
Â                                                </span>
Â                                            </div>
Â                                            <p className="text-sm text-gray-600 mt-2">
Â                                                {employees.length} funcionÃ¡rios
Â                                            </p>
Â                                        </div>
Â                                    </div>
Â                                )}
Â                            </div>
Â                        )}

Â                        {showProductionModal && selectedProductionCell && (
Â                            <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
Â                                <div className="bg-white rounded-lg shadow-xl max-w-md w-full p-6">
Â                                    <h3 className="text-xl font-bold text-gray-800 mb-4">
Â                                        Detalhes da ProduÃ§Ã£o
Â                                    </h3>
Â 
Â                                    <div className="space-y-4">
Â                                        <div>
Â                                            <p className="text-sm text-gray-600">FuncionÃ¡rio</p>
Â                                            <p className="font-semibold">{selectedProductionCell.employee.name}</p>
Â                                        </div>
Â 
Â                                        <div>
Â                                            <p className="text-sm text-gray-600">Data</p>
Â                                            <p className="font-semibold">{selectedProductionCell.date}</p>
Â                                        </div>
Â 
Â                                        <div>
Â                                            <label className="block text-sm font-medium text-gray-700 mb-1">
Â                                                Valor (R$)
Â                                            </label>
Â                                            <input
Â                                                type="number"
Â                                                step="0.01"
Â                                                value={selectedProductionCell.value || ''}
Â                                                onChange={(e) => setSelectedProductionCell({
Â                                                    ...selectedProductionCell,
Â                                                    value: parseFloat(e.target.value) || 0
Â                                                })}
Â                                                className="w-full px-4 py-2 border border-gray-300 rounded-lg"
Â                                            />
Â                                        </div>

Â                                        <div>
Â                                            <label className="block text-sm font-medium text-gray-700 mb-1">
Â                                                Trabalhou em outra equipe?
Â                                            </label>
Â                                            <select
Â                                                value={selectedProductionCell.workedTeam || ''}
Â                                                onChange={(e) => setSelectedProductionCell({
Â                                                    ...selectedProductionCell,
Â                                                    workedTeam: e.target.value || null
Â                                                })}
Â                                                className="w-full px-4 py-2 border border-gray-300 rounded-lg"
Â                                            >
Â                                                <option value="">NÃ£o (equipe: {selectedProductionCell.employee.team})</option>
Â                                                {teams.filter(t => t !== selectedProductionCell.employee.team).map(team => (
Â                                                    <option key={team} value={team}>{team}</option>
Â                                                ))}
Â                                            </select>
Â                                        </div>

Â                                        <div>
Â                                            <label className="block text-sm font-medium text-gray-700 mb-1">
Â                                                ObservaÃ§Ãµes
Â                                            </label>
Â                                            <textarea
Â                                                value={selectedProductionCell.observation || ''}
Â                                                onChange={(e) => setSelectedProductionCell({
Â                                                    ...selectedProductionCell,
Â                                                    observation: e.target.value
Â                                                })}
Â                                                className="w-full px-4 py-2 border border-gray-300 rounded-lg"
Â                                                rows="3"
Â                                                placeholder="Ex: Hora extra, substituiÃ§Ã£o..."
Â                                            />
Â                                        </div>
Â                                    </div>

Â                                    <div className="flex gap-3 mt-6">
Â                                        <button
Â                                            onClick={saveProductionDetails}
Â                                            className="flex-1 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700"
Â                                        >
Â                                            Salvar
Â                                        </button>
Â                                        <button
Â                                            onClick={() => {
Â                                                setShowProductionModal(false);
Â                                                setSelectedProductionCell(null);
Â                                            }}
Â                                            className="flex-1 px-6 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400"
Â                                        >
Â                                            Cancelar
Â                                        </button>
Â                                    </div>
Â                                </div>
Â                            </div>
Â                        )}
Â                    </div>
Â                </div>
Â            );
Â        };

Â        const EmployeeForm = ({ positions, teams, onSave, onCancel, initialData }) => {
Â            const [formData, setFormData] = useState(initialData || {
Â                name: '',
Â                badge: '',
Â                position: positions[0].name,
Â                team: teams[0],
Â                dailyValue: positions[0].baseValue
Â            });

Â            const handlePositionChange = (position) => {
Â                const positionData = positions.find(p => p.name === position);
Â                setFormData({
Â                    ...formData,
Â                    position,
Â                    dailyValue: positionData.baseValue
Â                });
Â            };

Â            return (
Â                <div className="bg-blue-50 p-6 rounded-lg mb-6">
Â                    <h3 className="text-lg font-bold text-gray-800 mb-4">
Â                        {initialData ? 'Editar' : 'Novo'} FuncionÃ¡rio
Â                    </h3>
Â                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
Â                        <div>
Â                            <label className="block text-sm font-medium text-gray-700 mb-1">Nome *</label>
Â                            <input
Â                                type="text"
Â                                value={formData.name}
Â                                onChange={(e) => setFormData({ ...formData, name: e.target.value })}
Â                                className="w-full px-4 py-2 border border-gray-300 rounded-lg"
Â                            />
Â                        </div>
Â                        <div>
Â                            <label className="block text-sm font-medium text-gray-700 mb-1">Ficha</label>
Â                            <input
Â                                type="text"
Â                                value={formData.badge}
Â                                onChange={(e) => setFormData({ ...formData, badge: e.target.value })}
Â                                className="w-full px-4 py-2 border border-gray-300 rounded-lg"
Â                            />
Â                        </div>
Â                        <div>
Â                            <label className="block text-sm font-medium text-gray-700 mb-1">Cargo *</label>
Â                            <select
Â                                value={formData.position}
Â                                onChange={(e) => handlePositionChange(e.target.value)}
Â                                className="w-full px-4 py-2 border border-gray-300 rounded-lg"
Â                            >
Â                                {positions.map(pos => (
Â                                    <option key={pos.name} value={pos.name}>{pos.name}</option>
Â                                ))}
Â                            </select>
Â                        </div>
Â                        <div>
Â                            <label className="block text-sm font-medium text-gray-700 mb-1">Equipe *</label>
Â                            <select
Â                                value={formData.team}
Â                                onChange={(e) => setFormData({ ...formData, team: e.target.value })}
Â                                className="w-full px-4 py-2 border border-gray-300 rounded-lg"
Â                            >
Â                                {teams.map(team => (
Â                                    <option key={team} value={team}>{team}</option>
Â                                ))}
Â                            </select>
Â                        </div>
Â                        <div>
Â                            <label className="block text-sm font-medium text-gray-700 mb-1">Valor DiÃ¡rio (R$) *</label>
Â                            <input
Â                                type="number"
Â                                step="0.01"
Â                                value={formData.dailyValue}
Â                                onChange={(e) => setFormData({ ...formData, dailyValue: parseFloat(e.target.value) || 0 })}
Â                                className="w-full px-4 py-2 border border-gray-300 rounded-lg"
Â                            />
Â                        </div>
Â                    </div>
Â                    <div className="flex gap-3 mt-6">
Â                        <button
Â                            onClick={() => {
Â                                if (!formData.name.trim()) {
Â                                    alert('Preencha o nome');
Â                                    return;
Â                                }
Â                                onSave(formData);
Â                            }}
Â                            className="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700"
Â                        >
Â                            {initialData ? 'Salvar' : 'Adicionar'}
Â                        </button>
Â                        <button
Â                            onClick={onCancel}
Â                            className="px-6 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400"
Â                        >
Â                            Cancelar
Â                        </button>
Â                    </div>
Â                </div>
Â            );
Â        };

Â        ReactDOM.render(<BonusApp />, document.getElementById('root'));
Â    </script>
</body>
</html>